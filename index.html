<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ç¦å²¡ãƒ»ç”±å¸ƒé™¢ãƒ»é˜¿è˜‡ï½œ6æ—¥è¡Œç¨‹</title>
  <style>
    :root{
      --bg:#f6f7fb;
      --surface:#ffffff;
      --card:#ffffff;
      --text:#111827;
      --muted:#6b7280;
      --line:#e5e7eb;
      --chip:#f3f4f6;
      --accent:#2563eb;
      --shadow:0 8px 24px rgba(0,0,0,.08);
      --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans TC", "PingFang TC", "Hiragino Sans", "Helvetica Neue", Arial;
      line-height:1.6;
    }
    a{color:inherit}

    .wrap{max-width:1100px;margin:0 auto;padding:22px 16px 26px}

    header{
      display:flex;gap:12px;flex-wrap:wrap;align-items:flex-end;justify-content:space-between;
      margin-bottom:14px;
    }
    h1{margin:0;font-size:20px;letter-spacing:.2px}
    .sub{color:var(--muted);font-size:12px}

    .board{
      border:1px solid var(--line);
      border-radius:var(--radius);
      background:var(--surface);
      box-shadow:var(--shadow);
      overflow:hidden;
      /* iOS Safari: allow vertical scroll, let JS handle horizontal swipe */
      touch-action: pan-y;
    }

    /* Tabs */
    .tabs{
      display:flex;
      gap:10px;
      padding:14px 14px 12px;
      border-bottom:1px solid var(--line);
      background:#ffffff;
      overflow-x:auto;
    }
    .tabs::-webkit-scrollbar{height:8px}
    .tabs::-webkit-scrollbar-thumb{background:rgba(255,255,255,.14);border-radius:999px}
    .tabs::-webkit-scrollbar-track{background:rgba(255,255,255,.05)}

    .tab{
      appearance:none;
      border:1px solid var(--line);
      background:#ffffff;
      color:var(--text);
      padding:10px 14px;
      border-radius:999px;
      font-size:13px;
      cursor:pointer;
      white-space:nowrap;
      transition:background .15s ease, border-color .15s ease;
    }
    .tab:hover{transform:translateY(-1px)}
    .tab[aria-selected="true"]{
      border-color:var(--accent);
      background:#eef2ff;
      box-shadow:none;
    }

    /* Panels */
    .panel{display:none;padding:16px 14px 18px}
    .panel.active{display:block}

    .dayHeader{
      display:flex;align-items:flex-start;justify-content:space-between;gap:12px;
      padding:6px 6px 12px;
    }
    .dayHeaderRight{margin-left:auto;padding-top:10px}
    .dayDateRight{color:var(--text);font-size:18px;font-weight:800;line-height:1.2}
    .dayTitle{display:flex;gap:12px;align-items:center}
    .num{
      width:40px;height:40px;border-radius:14px;
      display:grid;place-items:center;
      border:1px solid rgba(96,165,250,.45);
      background:rgba(96,165,250,.10);
      font-weight:800;
    }
    .tblock{min-width:0;padding-top:2px}
    .tblock h2{margin:0;font-size:18px;line-height:1.2}

    /* Accordion sections */
    details{
      border:1px solid var(--line);
      border-radius:16px;
      background:#ffffff;
      overflow:hidden;
      margin-top:10px;
    }
    summary{
      list-style:none;
      cursor:pointer;
      padding:12px 12px;
      display:flex;align-items:center;justify-content:space-between;gap:10px;
      font-weight:700;
    }
    summary::-webkit-details-marker{display:none}
    .chev{color:var(--muted);transition:transform .15s ease}
    details[open] .chev{transform:rotate(180deg)}

    .content{padding:0 12px 12px}

    /* Timeline */
    .timeline{
      border:1px solid var(--line);
      border-radius:14px;
      background:#ffffff;
      overflow:hidden;
    }
    .tHead{
      display:flex;align-items:center;justify-content:space-between;
      padding:10px 12px;
      border-bottom:1px solid var(--line);
      background:rgba(255,255,255,.03);
      font-weight:700;
    }
    .tHead span{color:var(--muted);font-weight:600;font-size:12px}

    .tRow{
      display:grid;
      grid-template-columns: 92px 1fr;
      gap:12px;
      padding:12px;
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    .tRow:last-child{border-bottom:none}
    .time{font-variant-numeric: tabular-nums;font-weight:800}
    .meta{color:var(--muted);font-size:12px;margin-top:3px}
    .place{font-weight:750}

    /* Small chips */
    .pills{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .pill{
      border:1px solid var(--line);
      background:var(--chip);
      color:var(--muted);
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
    }

    .links{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}

    .btn{
      text-decoration:none;
      font-size:12px;
      padding:8px 10px;
      border-radius:12px;
      border:1px solid var(--line);
      background:rgba(96,165,250,.10);
    }

    /* Photo gallery */
    .galleryWrap{margin-top:12px}
    .galleryTitle{font-weight:800;margin:0 0 8px;font-size:13px;color:var(--text)}
    .galleryRow{display:flex;gap:10px;overflow-x:auto;-webkit-overflow-scrolling:touch;scroll-snap-type:x mandatory;padding-bottom:6px}
    .galleryRow::-webkit-scrollbar{height:8px}
    .galleryRow::-webkit-scrollbar-thumb{background:rgba(17,24,39,.12);border-radius:999px}
    .galleryRow::-webkit-scrollbar-track{background:transparent}
    .gItem{flex:0 0 auto;width:220px;aspect-ratio:4/3;border-radius:14px;overflow:hidden;border:1px solid var(--line);background:#fff;scroll-snap-align:start;box-shadow:0 6px 16px rgba(0,0,0,.06);cursor:pointer;display:block}
    .gItem img{width:100%;height:100%;object-fit:cover;display:block}

    /* Lightbox */
    .lbModal{position:fixed;inset:0;z-index:60;display:none}
    .lbModal.open{display:block}
    .lbBackdrop{position:absolute;inset:0;background:rgba(17,24,39,.78)}
    .lbStage{position:absolute;inset:0;display:grid;place-items:center;padding:18px}
    .lbImg{max-width:min(980px,92vw);max-height:82vh;width:auto;height:auto;border-radius:16px;border:1px solid rgba(255,255,255,.18);box-shadow:0 12px 36px rgba(0,0,0,.35);background:#000;object-fit:contain}
    .lbClose{position:absolute;top:14px;right:14px;border:1px solid rgba(255,255,255,.22);background:rgba(17,24,39,.55);color:#fff;border-radius:12px;padding:8px 10px;cursor:pointer;font-size:14px;line-height:1;user-select:none}
    .lbNav{position:absolute;top:14px;left:14px;display:flex;gap:8px;align-items:center}
    .lbBtn{border:1px solid rgba(255,255,255,.22);background:rgba(17,24,39,.55);color:#fff;border-radius:12px;padding:8px 10px;cursor:pointer;font-size:14px;line-height:1;user-select:none}
    .lbCount{color:rgba(255,255,255,.85);font-size:12px;margin-left:6px}

    @media (max-width: 640px){
      .tRow{grid-template-columns: 78px 1fr}
      .num{width:38px;height:38px}
      .tblock h2{font-size:17px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>ç¦å²¡ãƒ»ç”±å¸ƒé™¢ãƒ»é˜¿è˜‡ï½œ6æ—¥è¡Œç¨‹</h1>
      </div>
      <div class="sub">03/23ï¼ˆä¸€ï¼‰â†’ 03/28ï¼ˆå…­ï¼‰</div>
    </header>

    <!-- Flight Summary -->
    <section style="margin-bottom:14px">
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
        <div style="border:1px solid var(--line);border-radius:16px;padding:12px;background:rgba(255,255,255,.03)">
          <strong>âœˆï¸ å»ç¨‹ï¼ˆ03/23 ä¸€ï¼‰è™èˆªIT720</strong>
          <ul style="margin:8px 0 0;padding-left:18px">
            <li>â° é è¨ˆ 10:00 æŠµé”æ©Ÿå ´</li>
            <li>ğŸ›« 13:40ã€€å‡ºç™¼ TPE æ¡ƒåœ’åœ‹éš›æ©Ÿå ´ï¼ˆç¬¬ä¸€èˆªå»ˆï¼‰</li>
            <li>ğŸ›¬ 16:55ã€€æŠµé” FUK ç¦å²¡æ©Ÿå ´</li>
          </ul>
        </div>
        <div style="border:1px solid var(--line);border-radius:16px;padding:12px;background:rgba(255,255,255,.03)">
          <strong>âœˆï¸ å›ç¨‹ï¼ˆ03/28 å…­ï¼‰è™èˆªIT241</strong>
          <ul style="margin:8px 0 0;padding-left:18px">
            <li>â° é è¨ˆ 08:00 æŠµé”æ©Ÿå ´</li>
            <li>ğŸ›« 10:55ã€€å‡ºç™¼ FUK ç¦å²¡æ©Ÿå ´</li>
            <li>ğŸ›¬ 12:40ã€€æŠµé” TPE æ¡ƒåœ’åœ‹éš›æ©Ÿå ´ï¼ˆç¬¬ä¸€èˆªå»ˆï¼‰</li>
          </ul>
        </div>
      </div>
    </section>

    <div class="board">
      <nav class="tabs" role="tablist" aria-label="è¡Œç¨‹æ—¥åˆ‡æ›">
        <button class="tab" role="tab" aria-selected="true" data-day="day1">Day 1</button>
        <button class="tab" role="tab" aria-selected="false" data-day="day2">Day 2</button>
        <button class="tab" role="tab" aria-selected="false" data-day="day3">Day 3</button>
        <button class="tab" role="tab" aria-selected="false" data-day="day4">Day 4</button>
        <button class="tab" role="tab" aria-selected="false" data-day="day5">Day 5</button>
        <button class="tab" role="tab" aria-selected="false" data-day="day6">Day 6</button>
      </nav>

      <!-- LOCKED templates (Day1 / Day2) -->
      <template id="tpl-day1">
        <div class="dayHeader">
          <div class="dayTitle">
            <div class="num">1</div>
            <div class="tblock"><h2>æŠµé”ç¦å²¡ï½œåšå¤šæ™šé¤ &amp; ä¼‘æ¯</h2></div>
          </div>
          <div class="dayHeaderRight"><div class="dayDateRight">03/23ï¼ˆä¸€ï¼‰</div></div>
        </div>

        <div class="dayBody">
          <div class="content">
            <div class="timeline">
              <div class="tRow">
                <div><div class="time">16:55</div><div class="meta">æŠµé”</div></div>
                <div><div class="place">ç¦å²¡æ©Ÿå ´ï¼ˆFUKï¼‰</div><div class="meta">å…¥å¢ƒï¼å–è¡Œæ</div></div>
              </div>
              <div class="tRow">
                <div><div class="time">18:10</div><div class="meta">ç§»å‹•</div></div>
                <div><div class="place">å‰å¾€åšå¤šå¸‚å€</div><div class="meta">ğŸš•æ©Ÿå ´è‡³é£¯åº—è·é›¢ç´„4â€“4.5å…¬é‡ŒğŸ’°4äººç´„Â¥1,800 â€“ Â¥2,500ï¼ğŸš‡æ­ä¹˜æ©Ÿå ´ç·šè‡³ç¦å²¡ç«™ä¸‹è»Šå¾Œæ­¥è¡Œç´„10åˆ†é˜/550å…¬å°ºğŸ’°Â¥260*4äºº</div></div>
              </div>
              <div class="tRow">
                <div><div class="time">18:50</div><div class="meta">å…¥ä½</div></div>
                <div><div class="place">ğŸ¨ Prince Smart Inn Hakata</div><div class="meta">3-21-4, Hakataekimae, Hakata-ku, Fukuoka, 812-0011, Japan</div></div>
              </div>
              <div class="tRow">
                <div><div class="time">19:30</div><div class="meta">æ™šé¤</div></div>
                <div><div class="place">ğŸ¥©ç‡’è‚‰ Hayato åšå¤šç«™æ±åº—</div><div class="meta">æä¾›ä¸­æ–‡ä»‹é¢ä»¥å¹³æ¿é€²è¡Œé»é¤ğŸ’°å¥—é¤Â¥4,950æ—¥åœ“(å«ç¨…) ç‰¹ç­‰ç‰›èˆŒã€ç‰¹é¸ç‰›æ’æ‹¼ç›¤ã€å…§è‡Ÿæ‹¼ç›¤ã€è±¬é‡Œè„Šï¼†èµ¤é›æ‹¼ç›¤ã€ç‰¹é¸äº”èŠ±è‚‰ã€ç‰¹é¸ç‰›é‡Œè„Šã€æ³¡èœæ‹¼ç›¤ã€é†‹é†¬æ‹Œé«˜éº—èœã€çƒ¤è”¬èœï¼ˆ3ç¨®æ¯å¤©è®Šæ›ï¼‰ã€éŸ“å¼æ³¡é£¯ï¼æ¹¯å“ï¼éŸ“å¼æ‹Œé£¯ï¼ç™½é£¯ï¼ˆ4é¸1ï¼‰</div></div>
              </div>
            </div>

            <div class="galleryWrap" aria-label="Day1 ç…§ç‰‡">
              <p class="galleryTitle">ğŸ“· Day 1 ç…§ç‰‡</p>
              <div class="galleryRow" role="list">
                <div class="gItem" role="listitem"><img loading="lazy" src="day1/01.jpg" data-full="day1/01.jpg" alt="Day 1 ç…§ç‰‡ 1"></div>
                <div class="gItem" role="listitem"><img loading="lazy" src="day1/02.jpg" data-full="day1/02.jpg" alt="Day 1 ç…§ç‰‡ 2"></div>
                <div class="gItem" role="listitem"><img loading="lazy" src="day1/03.jpg" data-full="day1/03.jpg" alt="Day 1 ç…§ç‰‡ 3"></div>
                <div class="gItem" role="listitem"><img loading="lazy" src="day1/04.jpg" data-full="day1/04.jpg" alt="Day 1 ç…§ç‰‡ 4"></div>
              </div>
            </div>

            <div class="pills">
              <span class="pill">éš”å¤©æ—©é¤ï¼šè¿”å›é£¯åº—å‰-Dacomeccaè³¼è²·éºµåŒ…ã€é£²å“å¯ä½œç‚ºæ˜æ—¥æ—©é¤</span>
              <span class="pill">å–è»Šåœ°é»ï¼šBudget Car Rental Hakata Gion (é£¯åº—æ­¥è¡Œè‡³æ­¤ç´„10åˆ†é˜/550å…¬å°º)</span>
            </div>

            <div class="links">
              <a class="btn" href="comgooglemaps://?q=Fukuoka%20Airport%20(FUK)" onclick="setTimeout(()=>{window.location.href='https://www.google.com/maps/search/?api=1&query=Fukuoka%20Airport%20(FUK)'},300)">ç¦å²¡æ©Ÿå ´åœ°åœ–</a>
              <a class="btn" href="comgooglemaps://?q=Prince%20Smart%20Inn%20Hakata" onclick="setTimeout(()=>{window.location.href='https://www.google.com/maps/d/viewer?mid=14d0NUVU1_hLuYWMW2iugAFUnhmY5kg8'},300)">é£¯åº—å‘¨é‚Šåœ°åœ–</a>
            </div>
          </div>
        </div>
      </template>

      <!-- âœ… Day2 template (LOCKED) - é †åºï¼šç…§ç‰‡ â†’ é›¨å¤©å‚™æ¡ˆ â†’ å°èˆªæŒ‰éˆ• -->
      <template id="tpl-day2">
        <div class="dayHeader">
          <div class="dayTitle">
            <div class="num">2</div>
            <div class="tblock"><h2>è‡ªé§•ï½œåšå¤š â‡„ ç”±å¸ƒé™¢ â‡„ ä¹é‡ï½œå…©ç¨®è·¯ç·šå‚™é¸</h2></div>
          </div>
          <div class="dayHeaderRight"><div class="dayDateRight">03/24ï¼ˆäºŒï¼‰</div></div>
        </div>

        <div class="dayBody">
          <div class="content">

            <!-- å…±é€šï¼šå–è»Š -->
            <div class="timeline">
              <div class="tRow">
                <div><div class="time">08:00â€“</div></div>
                <div><div class="place">Budget Car Rental Hakata Gion</div></div>
              </div>
              <div class="tRow">
                <div><div class="time">08:30</div></div>
                <div><div class="place">é ˜è»Šï¼æª¢æŸ¥è»Šæ³ï¼è¨­å®šå°èˆª</div></div>
              </div>
            </div>

            <!-- A/B èªªæ˜ -->
            <details style="margin-top:12px">
              <summary>ğŸ§­ ç‚ºä»€éº¼è¦åš Aï¼B å…©å¥—ï¼ˆæ€éº¼é¸ï¼‰<span class="chev">âŒ„</span></summary>
              <div class="content">
                <ul style="margin:0;padding-left:18px;color:var(--muted);font-size:13px">
                  <li><strong>æ–¹æ¡ˆ Aï¼ˆå…ˆä¹é‡â†’å†ç”±å¸ƒé™¢ï¼‰</strong>ï¼šå…ˆè·‘æˆ¶å¤–å¤§æ™¯ï¼ˆä¹é‡å¤¢å¤§åŠæ©‹ï¼‰ï¼›ä¸‹åˆå›ç”±å¸ƒé™¢æ•£æ­¥æ”¶å°¾ã€‚</li>
                  <li><strong>æ–¹æ¡ˆ Bï¼ˆå…ˆç”±å¸ƒé™¢â†’å†ä¹é‡ï¼‰</strong>ï¼šå…ˆå®Œæˆç”±å¸ƒé™¢é‡é»ï¼›ä¸‹åˆå†å»ä¹é‡ä½œç‚ºæœ€å¾Œä¸€ç«™ã€‚</li>
                  <li><strong>é¸æ“‡åŸå‰‡</strong>ï¼šä¾<strong>å¤©æ°£</strong>ã€<strong>å‡ºç™¼æ™‚é–“</strong>èˆ‡<strong>é«”åŠ›</strong>æ±ºå®šã€‚</li>
                </ul>
              </div>
            </details>

            <!-- æ–¹æ¡ˆ A -->
            <details style="margin-top:12px">
              <summary>ğŸ…°ï¸ æ–¹æ¡ˆ Aï¼ˆå…ˆä¹é‡â†’å†ç”±å¸ƒé™¢â†’æ—…é¤¨è¯æŸšï¼‰<span class="chev">âŒ„</span></summary>
              <div class="content">
                <div class="timeline">
                  <div class="tHead">03/24ï¼ˆäºŒï¼‰ <span>æ–¹æ¡ˆ Aï½œåšå¤š â†’ ä¹é‡å¤¢å¤§åŠæ©‹ â†’ ç”±å¸ƒé™¢ â†’ æ—…é¤¨è¯æŸš</span></div>
                  <div class="tRow"><div><div class="time">ä¸Šåˆ</div><div class="meta">é«˜é€Ÿç§»å‹•</div></div><div><div class="place">ç¦å²¡éƒ½å¸‚é«˜é€Ÿ â†’ ä¹å·è‡ªå‹•è»Šé“ â†’ å¤§åˆ†è‡ªå‹•è»Šé“</div><div class="meta">è¡Œè»Šç´„ 2.5â€“3 å°æ™‚ï¼ˆå«ä¼‘æ¯ï¼‰</div></div></div>
                  <div class="tRow"><div><div class="time">é€”ä¸­</div><div class="meta">å»ºè­°åœé </div></div><div><div class="place">å±±ç”°SAï¼ˆä¸‹ã‚Šï¼‰</div><div class="meta">æ´—æ‰‹é–“ï¼å’–å•¡ï¼è£œçµ¦</div></div></div>
                  <div class="tRow"><div><div class="time">11:30â€“12:30</div><div class="meta">æ™¯é»</div></div><div><div class="place">ä¹é‡ã€Œå¤¢ã€å¤§åŠæ©‹</div><div class="meta">åœç•™ 45â€“60 åˆ†é˜</div></div></div>
                  <div class="tRow"><div><div class="time">14:00</div><div class="meta">å±•æœ›å°</div></div><div><div class="place">ç‹­éœ§å°</div><div class="meta">15â€“20 åˆ†é˜</div></div></div>
                  <div class="tRow"><div><div class="time">15:00</div><div class="meta">æ•£æ­¥</div></div><div><div class="place">é‡‘é±—æ¹–</div><div class="meta">åˆå¾Œå…‰ç·šä½³</div></div></div>
                  <div class="tRow"><div><div class="time">15:40</div><div class="meta">åœè»Šï¼†å¾’æ­¥</div></div><div><div class="place">æ¹¯å¸ƒé™¢ä¸­å¤®å…ç«¥å…¬åœ’ï¼ˆåœè»Šå¾Œå¾’æ­¥é€›æ¹¯ä¹‹åªï¼‰</div></div></div>
                  <div class="tRow"><div><div class="time">å‚æ™š</div><div class="meta">å…¥ä½</div></div><div><div class="place">æ—…é¤¨è¯æŸš</div><div class="meta">Checkâ€‘in å¾Œä¸å†å‹•è»Š</div></div></div>
                </div>
              </div>
            </details>

            <!-- æ–¹æ¡ˆ B -->
            <details style="margin-top:12px">
              <summary>ğŸ…±ï¸ æ–¹æ¡ˆ Bï¼ˆå…ˆç”±å¸ƒé™¢â†’å†ä¹é‡â†’æ—…é¤¨è¯æŸšï¼‰<span class="chev">âŒ„</span></summary>
              <div class="content">
                <div class="timeline">
                  <div class="tHead">03/24ï¼ˆäºŒï¼‰ <span>æ–¹æ¡ˆ Bï½œåšå¤š â†’ ç”±å¸ƒé™¢ â†’ ä¹é‡å¤¢å¤§åŠæ©‹ â†’ æ—…é¤¨è¯æŸš</span></div>
                  <div class="tRow"><div><div class="time">ä¸Šåˆ</div><div class="meta">é«˜é€Ÿç§»å‹•</div></div><div><div class="place">ç¦å²¡éƒ½å¸‚é«˜é€Ÿ â†’ ä¹å·è‡ªå‹•è»Šé“ â†’ å¤§åˆ†è‡ªå‹•è»Šé“</div><div class="meta">è¡Œè»Šç´„ 2.5â€“3 å°æ™‚ï¼ˆå«ä¼‘æ¯ï¼‰</div></div></div>
                  <div class="tRow"><div><div class="time">13:30</div><div class="meta">å±•æœ›å°</div></div><div><div class="place">ç‹­éœ§å°</div><div class="meta">15â€“20 åˆ†é˜</div></div></div>
                  <div class="tRow"><div><div class="time">14:10</div><div class="meta">æ•£æ­¥</div></div><div><div class="place">é‡‘é±—æ¹–</div></div></div>
                  <div class="tRow"><div><div class="time">14:40</div><div class="meta">åœè»Šï¼†å¾’æ­¥</div></div><div><div class="place">æ¹¯å¸ƒé™¢ä¸­å¤®å…ç«¥å…¬åœ’ï¼ˆåœè»Šå¾Œå¾’æ­¥é€›æ¹¯ä¹‹åªï¼‰</div></div></div>
                  <div class="tRow"><div><div class="time">16:30â€“17:30</div><div class="meta">æ™¯é»</div></div><div><div class="place">ä¹é‡ã€Œå¤¢ã€å¤§åŠæ©‹</div><div class="meta">45â€“60 åˆ†é˜</div></div></div>
                  <div class="tRow"><div><div class="time">å‚æ™š</div><div class="meta">å…¥ä½</div></div><div><div class="place">æ—…é¤¨è¯æŸš</div><div class="meta">Checkâ€‘in å¾Œä¸å†å‹•è»Š</div></div></div>
                </div>
              </div>
            </details>

            <details style="margin-top:12px;border:1px dashed var(--line);border-radius:14px;background:#fafafa">
              <summary>ğŸ› æŠµé”ç”±å¸ƒé™¢å¾Œï¼Œå¯èƒ½æœƒå»çš„åº—<span class="chev">âŒ„</span></summary>
              <div class="content">
                <ul style="margin:0;padding-left:18px;color:var(--muted);font-size:13px">
                  <li><strong>é‡‘è³å¯æ¨‚é¤… æœ¬åº—</strong>ï½œç¾ç‚¸å°åƒï¼Œé‚Šèµ°é‚Šåƒ</li>
                  <li><strong>B SPEAK æœ¬åº—</strong>ï½œè›‹ç³•å·ï¼ˆå»ºè­°å¤–å¸¶ï¼Œå”®å®Œç‚ºæ­¢ï¼‰</li>
                  <li><strong>ç”±å¸ƒé™¢ èŠ±éº´èŠå®¶</strong>ï½œä¼´æ‰‹ç¦®ï¼ˆé›¢é–‹æ™‚è³¼è²·ï¼‰</li>
                </ul>
                <div style="margin-top:6px;color:var(--muted);font-size:12px">ğŸ“Œ å»ºè­°ï¼šéƒ½åœ¨é‡‘é±—æ¹–ï¼æ¹¯ä¹‹åªå‘¨é‚Šï¼Œå¾ã€Œä¸­å¤®å…ç«¥å…¬åœ’ã€æ­¥è¡Œæœ€é †ã€‚</div>
              </div>
            </details>

            <!-- âœ… Day2 ç…§ç‰‡ï¼ˆç¬¬ä¸€é †ä½ï¼‰ -->
            <div class="galleryWrap" aria-label="Day2 ç…§ç‰‡">
              <p class="galleryTitle">ğŸ“· Day 2 ç…§ç‰‡</p>
              <div class="galleryRow" role="list">
                <div class="gItem" role="listitem"><img loading="lazy" src="day2/01.jpg" data-full="day2/01.jpg" alt="Day 2 ç…§ç‰‡ 1"></div>
                <div class="gItem" role="listitem"><img loading="lazy" src="day2/02.jpg" data-full="day2/02.jpg" alt="Day 2 ç…§ç‰‡ 2"></div>
                <div class="gItem" role="listitem"><img loading="lazy" src="day2/03.jpg" data-full="day2/03.jpg" alt="Day 2 ç…§ç‰‡ 3"></div>
                <div class="gItem" role="listitem"><img loading="lazy" src="day2/04.jpg" data-full="day2/04.jpg" alt="Day 2 ç…§ç‰‡ 4"></div>
                <div class="gItem" role="listitem"><img loading="lazy" src="day2/05.jpg" data-full="day2/05.jpg" alt="Day 2 ç…§ç‰‡ 5"></div>
                <div class="gItem" role="listitem"><img loading="lazy" src="day2/06.jpg" data-full="day2/06.jpg" alt="Day 2 ç…§ç‰‡ 6"></div>
              </div>
            </div>

            <!-- âœ… Day2 é›¨å¤©å‚™æ¡ˆï¼ˆç¬¬äºŒé †ä½ï¼Œç¨ç«‹ detailsï¼‰ -->
            <details style="margin-top:12px;border:1px dashed var(--line);border-radius:14px;background:#fafafa">
              <summary>ğŸŒ§ï¸ é›¨å¤©å‚™æ¡ˆï¼ˆDay2ï¼‰<span class="chev">âŒ„</span></summary>
              <div class="content">
                <ul style="margin:0;padding-left:18px;color:var(--muted);font-size:13px">
                  <li>é›¨å‹¢å¤§ï¼šç”±å¸ƒé™¢ï¼ˆæ¹¯ä¹‹åªï¼é‡‘é±—æ¹–ï¼‰å„ªå…ˆï¼Œå®¤å…§åº—å®¶ï¼‹æ•£æ­¥ç‚ºä¸»</li>
                  <li>ä¹é‡å¤¢å¤§åŠæ©‹ï¼šè¦–èƒ½è¦‹åº¦æ±ºå®šã€Œç¸®çŸ­åœç•™ã€æˆ–ã€Œå–æ¶ˆã€</li>
                  <li>å±±è·¯æ¿•æ»‘ï¼šææ—©å…¥ä½æ—…é¤¨è¯æŸšï¼Œé¿å…å‚æ™šè¶•è·¯</li>
                </ul>
              </div>
            </details>

            <!-- âœ… å°èˆªæ§åˆ¶éˆ•ï¼ˆç¬¬ä¸‰é †ä½ï¼‰ -->
            <div class="links" style="margin-top:12px">
              <a class="btn" target="_blank" rel="noopener" href="https://www.google.com/maps/dir/?api=1&destination=%E5%B1%B1%E7%94%B0%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%82%A8%E3%83%AA%E3%82%A2%20%28%E4%B8%8B%E3%82%8A%29&travelmode=driving">ğŸš— ä¼‘æ¯ç«™ï½œå±±ç”°SAï¼ˆå»ºè­°ï¼‰</a>
              <a class="btn" target="_blank" rel="noopener" href="https://www.google.com/maps/dir/?api=1&destination=%E7%8E%96%E7%8F%A0%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%82%A8%E3%83%AA%E3%82%A2%20%28%E4%B8%8B%E3%82%8A%29&travelmode=driving">ğŸš— ä¼‘æ¯ç«™ï½œç–ç SAï¼ˆæ¬¡è¦ï¼‰</a>
              <a class="btn" target="_blank" rel="noopener" href="https://www.google.com/maps/dir/?api=1&destination=377+023+247*63&travelmode=driving">ğŸš— å°èˆªï½œä¹é‡å¤¢å¤§åŠæ©‹</a>
              <a class="btn" target="_blank" rel="noopener" href="https://www.google.com/maps/dir/?api=1&destination=302+798+233*66&travelmode=driving">ğŸš— å°èˆªï½œç‹­éœ§å°</a>
              <a class="btn" target="_blank" rel="noopener" href="https://www.google.com/maps/dir/?api=1&destination=377+319+293*55&travelmode=driving">ğŸš— å°èˆªï½œé‡‘é±—æ¹–</a>
              <a class="btn" target="_blank" rel="noopener" href="https://www.google.com/maps/dir/?api=1&destination=%E6%B9%AF%E5%B8%83%E9%99%A2%E4%B8%AD%E5%A4%AE%E5%85%90%E7%AB%A5%E5%85%AC%E5%9C%92&travelmode=driving">ğŸš— å°èˆªï½œä¸­å¤®å…ç«¥å…¬åœ’</a>
              <a class="btn" target="_blank" rel="noopener" href="https://www.google.com/maps/dir/?api=1&destination=377+319+791*11&travelmode=driving">ğŸ¨ å°èˆªï½œæ—…é¤¨è¯æŸš</a>
            </div>
          </div>
        </div>
      </template>

      <!-- Panels (Day1/Day2 are locked and will be restored from templates) -->
      <section class="panel active" id="day1" role="tabpanel" aria-label="Day 1 è¡Œç¨‹" data-lock-template="tpl-day1"></section>
      <section class="panel" id="day2" role="tabpanel" aria-label="Day 2 è¡Œç¨‹" data-lock-template="tpl-day2"></section>

      <!-- Day 3 -->
      <section class="panel" id="day3" role="tabpanel" aria-label="Day 3 è¡Œç¨‹">
        <div class="dayHeader">
          <div class="dayTitle">
            <div class="num">3</div>
            <div class="tblock"><h2>é»‘å·æº«æ³‰å‘¨é‚Šï½œç€‘å¸ƒãƒ»æ°´æº</h2></div>
          </div>
          <div class="dayHeaderRight"><div class="dayDateRight">03/25ï¼ˆä¸‰ï¼‰</div></div>
        </div>

        <div class="dayBody">
          <div class="content">
            <div class="timeline">
              <div class="tRow"><div><div class="time">10:00</div><div class="meta">å‡ºç™¼</div></div><div><div class="place">æ—…é¤¨è¯æŸš</div><div class="meta">æ—©é¤å¾Œé€€æˆ¿ï¼Œæ•´ç†è¡Œæå†å‡ºç™¼</div></div></div>
              <div class="tRow"><div><div class="time">10:25â€“10:50</div><div class="meta">æ™¯é»</div></div><div><div class="place">å¤«å¦»ç€‘å¸ƒ</div><div class="meta">è¡Œè»Šç´„ 20â€“25 åˆ†é˜ï½œåœç•™ 15â€“25 åˆ†é˜</div></div></div>
              <div class="tRow"><div><div class="time">11:40â€“13:10</div><div class="meta">æ•£æ­¥ / åˆé¤</div></div><div><div class="place">é»‘å·æº«æ³‰ï¼ˆç¬¬ä¸‰é§è»Šå ´ï¼‰</div><div class="meta">æº«æ³‰è¡—æ•£æ­¥ï¼‹åˆé¤ï¼ˆç¾å ´æ±ºå®šï¼‰</div></div></div>
              <div class="tRow"><div><div class="time">13:50â€“14:30</div><div class="meta">æ™¯é»</div></div><div><div class="place">æ± å±±æ°´æº</div><div class="meta">è¡Œè»Šç´„ 35â€“40 åˆ†é˜ï½œåœç•™ 30â€“40 åˆ†é˜ï½œå¹³å¦å¥½èµ°</div></div></div>
              <div class="tRow"><div><div class="time">15:00â€“15:20</div><div class="meta">å…¥ä½</div></div><div><div class="place">Kamenoi Hotel Aso</div><div class="meta">æŠµé”å¾Œä¼‘æ¯ã€æ³¡æ¹¯</div></div></div>
            </div>

            <!-- âœ… Day3ï¼šç…§ç‰‡ â†’ é›¨å¤©å‚™æ¡ˆ â†’ å°èˆª -->
            <div class="galleryWrap" aria-label="Day3 ç…§ç‰‡">
              <p class="galleryTitle">ğŸ“· Day 3 ç…§ç‰‡</p>
              <div class="galleryRow" role="list">
                <div class="gItem" role="listitem"><img loading="lazy" src="day3/01.jpg" data-full="day3/01.jpg" alt="Day 3 ç…§ç‰‡ 1"></div>
                <div class="gItem" role="listitem"><img loading="lazy" src="day3/02.jpg" data-full="day3/02.jpg" alt="Day 3 ç…§ç‰‡ 2"></div>
                <div class="gItem" role="listitem"><img loading="lazy" src="day3/03.jpg" data-full="day3/03.jpg" alt="Day 3 ç…§ç‰‡ 3"></div>
              </div>
            </div>

            <details style="margin-top:12px;border:1px dashed var(--line);border-radius:14px;background:#fafafa">
              <summary>ğŸŒ§ï¸ é›¨å¤©å‚™æ¡ˆï¼ˆDay3ï¼‰<span class="chev">âŒ„</span></summary>
              <div class="content">
                <ul style="margin:0;padding-left:18px;color:var(--muted);font-size:13px">
                  <li>å¤«å¦»ç€‘å¸ƒé›¨å‹¢å¤§ï¼šæ”¹ç‚ºé»‘å·æº«æ³‰è¡—æ•£æ­¥ï¼‹ç”¨é¤æ‹‰é•·</li>
                  <li>æ± å±±æ°´æºï¼šè¦–é›¨å‹¢èˆ‡è·¯æ³ç¸®çŸ­æˆ–ç•¥é</li>
                  <li>ææ—©æŠµé”é£¯åº—ä¼‘æ¯æ³¡æ¹¯</li>
                </ul>
              </div>
            </details>

            <div class="links" style="margin-top:12px">
              <a class="btn" target="_blank" rel="noopener" href="https://www.google.com/maps/search/?api=1&query=%E5%A4%AB%E5%A6%BB%E7%80%91%E5%B8%83%E9%99%A2">ğŸš— å°èˆªï½œå¤«å¦»ç€‘å¸ƒ</a>
              <a class="btn" target="_blank" rel="noopener" href="https://www.google.com/maps/search/?api=1&query=%E9%BB%92%E5%B7%9D%E6%B8%A9%E6%B3%89%20%E7%AC%AC%E4%B8%89%E9%A7%90%E8%BB%8A%E5%A0%B4">ğŸš— å°èˆªï½œé»’å·æ¸©æ³‰ ç¬¬ä¸‰é§è»Šå ´</a>
              <a class="btn" target="_blank" rel="noopener" href="https://www.google.com/maps/search/?api=1&query=%E6%B1%A0%E5%B1%B1%E6%B0%B4%E6%BA%90">ğŸš— å°èˆªï½œæ± å±±æ°´æº</a>
              <a class="btn" target="_blank" rel="noopener" href="https://www.google.com/maps/search/?api=1&query=Kamenoi%20Hotel%20Aso">ğŸ¨ å°èˆªï½œKamenoi Hotel Aso</a>
            </div>
          </div>
        </div>
      </section>

      <!-- Day 4 -->
      <section class="panel" id="day4" role="tabpanel" aria-label="Day 4 è¡Œç¨‹">
        <div class="dayHeader">
          <div class="dayTitle"><div class="num">4</div><div class="tblock"><h2>é˜¿è˜‡ï½œç¥ç¤¾ãƒ»æ°´æºãƒ»è‰åƒé‡Œï½œå›ç¦å²¡é‚„è»Š</h2></div></div>
          <div class="dayHeaderRight"><div class="dayDateRight">03/26ï¼ˆå››ï¼‰</div></div>
        </div>
        <div class="dayBody"><div class="content">
          <div class="timeline">
            <div class="tHead">03/26ï¼ˆå››ï¼‰ <span>é˜¿è˜‡ï½œç¥ç¤¾ãƒ»æ°´æºãƒ»è‰åƒé‡Œï½œå›ç¦å²¡é‚„è»Š</span></div>
            <div class="tRow"><div><div class="time">09:00</div><div class="meta">å‡ºç™¼</div></div><div><div class="place">Kamenoi Hotel Aso</div><div class="meta">æ—©é¤å¾Œå‡ºç™¼ï¼ˆä¾å¯¦éš›ç”¨é¤æ™‚é–“å½ˆæ€§ï¼‰</div></div></div>
            <div class="tRow"><div><div class="time">09:30â€“10:20</div><div class="meta">ç¥ç¤¾</div></div><div><div class="place">é˜¿è˜‡ç¥ç¤¾</div><div class="meta">åœç•™ 40â€“60 åˆ†é˜</div></div></div>
            <div class="tRow"><div><div class="time">10:45â€“11:25</div><div class="meta">æ°´æº</div></div><div><div class="place">ç™½å·æ°´æºï¼ˆæˆ–åŒç´šæ°´æºé»ï¼‰</div><div class="meta">åœç•™ 30â€“40 åˆ†é˜</div></div></div>
            <div class="tRow"><div><div class="time">12:00â€“13:10</div><div class="meta">åˆé¤</div></div><div><div class="place">é˜¿è˜‡å¸‚å€ç”¨é¤</div><div class="meta">ç¾å ´æ±ºå®š</div></div></div>
            <div class="tRow"><div><div class="time">13:40â€“14:30</div><div class="meta">æ™¯é»</div></div><div><div class="place">è‰åƒé‡Œãƒ¶æµœ</div><div class="meta">åœç•™ 40â€“60 åˆ†é˜</div></div></div>
            <div class="tRow"><div><div class="time">15:00â€“18:00</div><div class="meta">ç§»å‹•</div></div><div><div class="place">é˜¿è˜‡ â†’ ç¦å²¡å¸‚å€</div><div class="meta">è¡Œè»Šç´„ 2.5â€“3 å°æ™‚ï¼ˆå«ä¼‘æ¯ç«™ï¼‰</div></div></div>
            <div class="tRow"><div><div class="time">18:30</div><div class="meta">é‚„è»Š</div></div><div><div class="place">Budget Car Rental Hakata Gionï¼ˆæˆ–ç§Ÿè»Šé–€å¸‚ï¼‰</div><div class="meta">é‚„è»Šï¼çµç®—</div></div></div>
            <div class="tRow"><div><div class="time">19:30</div><div class="meta">å…¥ä½</div></div><div><div class="place">ç¦å²¡å¸‚å€é£¯åº—</div><div class="meta">Check-in å¾Œè‡ªç”±æ´»å‹•ï¼æ™šé¤</div></div></div>
          </div>
          <div class="links">
            <a class="btn" target="_blank" rel="noopener" href="https://www.google.com/maps/search/?api=1&query=%E9%98%BF%E8%98%87%E7%A5%9E%E7%A4%BE">ğŸš— å°èˆªï½œé˜¿è˜‡ç¥ç¤¾</a>
            <a class="btn" target="_blank" rel="noopener" href="https://www.google.com/maps/search/?api=1&query=%E7%99%BD%E5%B7%9D%E6%B0%B4%E6%BA%90">ğŸš— å°èˆªï½œç™½å·æ°´æº</a>
            <a class="btn" target="_blank" rel="noopener" href="https://www.google.com/maps/search/?api=1&query=%E8%8D%89%E5%8D%83%E9%87%8C%E3%83%B6%E6%B5%9C">ğŸš— å°èˆªï½œè‰åƒé‡Œãƒ¶æµœ</a>
          </div>
        </div></div>
      </section>

      <!-- Day 5 -->
      <section class="panel" id="day5" role="tabpanel" aria-label="Day 5 è¡Œç¨‹">
        <div class="dayHeader">
          <div class="dayTitle"><div class="num">5</div><div class="tblock"><h2>ç¦å²¡å¸‚å€æ•£æ­¥ï½œå¤©ç¥ãƒ»åšå¤š</h2></div></div>
          <div class="dayHeaderRight"><div class="dayDateRight">03/27ï¼ˆäº”ï¼‰</div></div>
        </div>
        <div class="dayBody"><div class="content">
          <div class="timeline">
            <div class="tHead">03/27ï¼ˆäº”ï¼‰ <span>ç¦å²¡å¸‚å€æ•£æ­¥ï½œå¤©ç¥ãƒ»åšå¤š</span></div>
            <div class="tRow"><div><div class="time">ä¸Šåˆ</div><div class="meta">æ•£æ­¥</div></div><div><div class="place">å¤©ç¥ï¼å¤§å</div><div class="meta">å’–å•¡ã€é€›è¡—ã€ç™¾è²¨</div></div></div>
            <div class="tRow"><div><div class="time">12:00</div><div class="meta">åˆé¤</div></div><div><div class="place">å¤©ç¥/åšå¤š å‘¨é‚Šç”¨é¤</div><div class="meta">ç¾å ´æ±ºå®š</div></div></div>
            <div class="tRow"><div><div class="time">ä¸‹åˆ</div><div class="meta">é¸é…</div></div><div><div class="place">åšå¤šé‹æ²³åŸï¼æ«›ç”°ç¥ç¤¾ï¼å·ç«¯å•†åº—è¡—</div><div class="meta">æƒ³èµ°è·¯å°±æ’é€™æ®µï¼›æƒ³è³¼ç‰©å°±ç•™åœ¨å¤©ç¥</div></div></div>
            <div class="tRow"><div><div class="time">å‚æ™š</div><div class="meta">æ¡è²·</div></div><div><div class="place">ä¼´æ‰‹ç¦®ï¼æœ€å¾Œè£œè²¨</div><div class="meta">è¶…å¸‚ã€è—¥å¦ã€è»Šç«™å…§ä¼´æ‰‹ç¦®å€</div></div></div>
          </div>
        </div></div>
      </section>

      <!-- Day 6 -->
      <section class="panel" id="day6" role="tabpanel" aria-label="Day 6 è¡Œç¨‹">
        <div class="dayHeader">
          <div class="dayTitle"><div class="num">6</div><div class="tblock"><h2>å›ç¨‹ï½œç¦å²¡æ©Ÿå ´ â†’ æ¡ƒåœ’</h2></div></div>
          <div class="dayHeaderRight"><div class="dayDateRight">03/28ï¼ˆå…­ï¼‰</div></div>
        </div>
        <div class="dayBody"><div class="content">
          <div class="timeline">
            <div class="tHead">03/28ï¼ˆå…­ï¼‰ <span>å›ç¨‹ï½œç¦å²¡æ©Ÿå ´ â†’ æ¡ƒåœ’</span></div>
            <div class="tRow"><div><div class="time">07:00</div><div class="meta">èµ·åºŠ</div></div><div><div class="place">é£¯åº—</div><div class="meta">é€€æˆ¿æº–å‚™ï¼ç¢ºèªè­·ç…§ã€æ©Ÿç¥¨ã€è¡Œæ</div></div></div>
            <div class="tRow"><div><div class="time">07:30</div><div class="meta">å‡ºç™¼</div></div><div><div class="place">å‰å¾€ç¦å²¡æ©Ÿå ´ï¼ˆFUKï¼‰</div><div class="meta">å»ºè­°ææ—©ï¼ˆä½ å€‘é è¨ˆ 08:00 æŠµé”ï¼‰</div></div></div>
            <div class="tRow"><div><div class="time">08:00</div><div class="meta">æŠµé”</div></div><div><div class="place">ç¦å²¡æ©Ÿå ´</div><div class="meta">å ±åˆ°ï¼æ‰˜é‹ï¼å®‰æª¢</div></div></div>
            <div class="tRow"><div><div class="time">10:55</div><div class="meta">èµ·é£›</div></div><div><div class="place">è™èˆª IT241</div><div class="meta">FUK â†’ TPE</div></div></div>
            <div class="tRow"><div><div class="time">12:40</div><div class="meta">æŠµé”</div></div><div><div class="place">æ¡ƒåœ’åœ‹éš›æ©Ÿå ´ï¼ˆTPEï¼‰</div><div class="meta">ç¬¬ä¸€èˆªå»ˆ</div></div></div>
          </div>
          <div class="links">
            <a class="btn" href="comgooglemaps://?q=Fukuoka%20Airport%20(FUK)" onclick="setTimeout(()=>{window.location.href='https://www.google.com/maps/search/?api=1&query=Fukuoka%20Airport%20(FUK)'},300)">ç¦å²¡æ©Ÿå ´åœ°åœ–</a>
          </div>
        </div></div>
      </section>

    </div>
  </div>

  <script>
  (function(){
    if(window.__itineraryInit) return;
    window.__itineraryInit = true;

    function qs(sel, root=document){ return root.querySelector(sel); }
    function qsa(sel, root=document){ return Array.from(root.querySelectorAll(sel)); }

    function restoreLockedPages(){
      qsa('[data-lock-template]').forEach(panel => {
        const tplId = panel.getAttribute('data-lock-template');
        const tpl = tplId ? document.getElementById(tplId) : null;
        if(!tpl || !tpl.content) return;
        panel.innerHTML = '';
        panel.appendChild(tpl.content.cloneNode(true));
      });
    }

    function initTabs(){
      const tabs = qsa('.tab');
      const panels = qsa('.panel');
      const dayIds = panels.map(p => p.id);

      function setActive(dayId){
        tabs.forEach(t => t.setAttribute('aria-selected', String(t.dataset.day === dayId)));
        panels.forEach(p => p.classList.toggle('active', p.id === dayId));

        window.scrollTo({ top: 0, behavior: 'smooth' });

        const activeTab = tabs.find(t => t.dataset.day === dayId);
        if(activeTab) activeTab.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
      }

      tabs.forEach(btn => btn.addEventListener('click', () => setActive(btn.dataset.day)));

      // ===== æ‰‹æ©Ÿå·¦å³æ»‘å‹•åˆ‡æ› Day =====
      (function enableSwipeToSwitchDays(){
        const swipeArea = qs('.board') || document.body;
        let startX=0, startY=0, lastX=0, lastY=0;
        let tracking=false;
        let lockedHorizontal=false;

        const THRESHOLD = 60;
        const SLOPE = 1.5;

        function getActiveIndex(){
          const i = panels.findIndex(p => p.classList.contains('active'));
          return i >= 0 ? i : 0;
        }
        function setActiveByIndex(idx){
          const clamped = Math.max(0, Math.min(dayIds.length - 1, idx));
          setActive(dayIds[clamped]);
        }
        function isInTabs(target){
          return !!(target && target.closest && target.closest('.tabs'));
        }
        function isInLightbox(target){
          return !!(target && target.closest && target.closest('.lbModal.open'));
        }
        function isInGallery(target){
          // åœ¨ç…§ç‰‡æ©«å‘æ»‘å‹•å€ï¼ˆç¸®åœ–åˆ—ï¼‰æ™‚ï¼Œä¸è¦è§¸ç™¼ã€Œå·¦å³æ»‘æ› Dayã€
          return !!(target && target.closest && target.closest('.galleryRow'));
        }

        swipeArea.addEventListener('touchstart', (e) => {
          if(!e.touches || e.touches.length !== 1) return;
          if(isInTabs(e.target)) return;
          if(isInLightbox(e.target)) return;
          if(isInGallery(e.target)) return;

          const t = e.touches[0];
          startX = lastX = t.clientX;
          startY = lastY = t.clientY;
          tracking = true;
          lockedHorizontal = false;
        }, { passive: true });

        swipeArea.addEventListener('touchmove', (e) => {
          if(!tracking || !e.touches || e.touches.length !== 1) return;
          const t = e.touches[0];
          lastX = t.clientX;
          lastY = t.clientY;

          const dx = lastX - startX;
          const dy = lastY - startY;

          if(!lockedHorizontal && Math.abs(dx) > 10){
            if(Math.abs(dx) > Math.abs(dy) * SLOPE){
              lockedHorizontal = true;
            } else {
              tracking = false;
              return;
            }
          }

          if(lockedHorizontal){
            e.preventDefault();
          }
        }, { passive: false });

        swipeArea.addEventListener('touchend', () => {
          if(!tracking) return;

          const dx = lastX - startX;
          const dy = lastY - startY;

          if(Math.abs(dx) > THRESHOLD && Math.abs(dx) > Math.abs(dy) * SLOPE){
            const idx = getActiveIndex();
            if(dx < 0) setActiveByIndex(idx + 1);
            else setActiveByIndex(idx - 1);
          }

          tracking = false;
          lockedHorizontal = false;
        }, { passive: true });
      })();
    }

    function initLightbox(){
      // å»ºç«‹ä¸€æ¬¡ Lightbox DOM
      if(!qs('.lbModal')){
        const lb = document.createElement('div');
        lb.className = 'lbModal';
        lb.innerHTML = `
          <div class="lbBackdrop" data-lb-close></div>
          <div class="lbStage"><img class="lbImg" alt="" /></div>
          <div class="lbNav">
            <button class="lbBtn" type="button" data-lb-prev aria-label="ä¸Šä¸€å¼µ">â€¹</button>
            <button class="lbBtn" type="button" data-lb-next aria-label="ä¸‹ä¸€å¼µ">â€º</button>
            <span class="lbCount" data-lb-count>0/0</span>
          </div>
          <button class="lbClose" type="button" data-lb-close aria-label="é—œé–‰">âœ•</button>
        `;
        document.body.appendChild(lb);
      }

      const modal = qs('.lbModal');
      const stage = qs('.lbStage', modal);
      const imgEl = qs('.lbImg', modal);
      const countEl = qs('[data-lb-count]', modal);

      let list = [];
      let idx = 0;

      function openAt(i){
        if(!list.length) return;
        idx = (i + list.length) % list.length;
        imgEl.src = list[idx];
        countEl.textContent = `${idx + 1}/${list.length}`;
        modal.classList.add('open');
        document.body.style.overflow = 'hidden';
      }
      function close(){
        modal.classList.remove('open');
        document.body.style.overflow = '';
      }
      function next(){ openAt(idx + 1); }
      function prev(){ openAt(idx - 1); }

      // é»é»‘åº•æˆ–å³ä¸Šè§’ âœ• é—œé–‰
      modal.addEventListener('click', (e) => {
        if(e.target && e.target.closest && e.target.closest('[data-lb-close]')) close();
      });

      // ä¸Šä¸€å¼µ/ä¸‹ä¸€å¼µ
      qs('[data-lb-next]', modal).addEventListener('click', (e) => { e.stopPropagation(); next(); });
      qs('[data-lb-prev]', modal).addEventListener('click', (e) => { e.stopPropagation(); prev(); });

      // éµç›¤æ”¯æ´
      window.addEventListener('keydown', (e) => {
        if(!modal.classList.contains('open')) return;
        if(e.key === 'Escape') close();
        if(e.key === 'ArrowRight') next();
        if(e.key === 'ArrowLeft') prev();
      });

      // é»ç¸®åœ–é–‹å•Ÿï¼ˆäº‹ä»¶å§”æ´¾ï¼Œtemplate åè¦†é‚„åŸä¹Ÿä¸æ€•ï¼‰
      document.addEventListener('click', (e) => {
        const thumb = e.target && e.target.closest && e.target.closest('.galleryRow .gItem img');
        if(!thumb) return;

        const row = thumb.closest('.galleryRow');
        const imgs = qsa('.gItem img', row);
        list = imgs.map(x => x.getAttribute('data-full') || x.currentSrc || x.src);
        openAt(imgs.indexOf(thumb));
      }, { passive: true });

      // æ‰‹æ©Ÿï¼šæ”¾å¤§å¾Œå·¦å³æ»‘åˆ‡æ›
      let tsx=0, tsy=0, tlx=0, tly=0, tracking=false;
      const LB_TH = 50;

      stage.addEventListener('touchstart', (e) => {
        if(!modal.classList.contains('open')) return;
        if(!e.touches || e.touches.length !== 1) return;
        const t = e.touches[0];
        tsx = tlx = t.clientX;
        tsy = tly = t.clientY;
        tracking = true;
      }, { passive: true });

      stage.addEventListener('touchmove', (e) => {
        if(!tracking || !e.touches || e.touches.length !== 1) return;
        const t = e.touches[0];
        tlx = t.clientX;
        tly = t.clientY;
      }, { passive: true });

      stage.addEventListener('touchend', () => {
        if(!tracking) return;
        const dx = tlx - tsx;
        const dy = tly - tsy;
        if(Math.abs(dx) > LB_TH && Math.abs(dx) > Math.abs(dy) * 1.2){
          if(dx < 0) next();
          else prev();
        }
        tracking = false;
      }, { passive: true });
    }

    // ===== æœ€å°æ¸¬è©¦ï¼ˆdebug=1 æ™‚æ‰è·‘ï¼Œä¸å½±éŸ¿ä¸€èˆ¬ä½¿ç”¨ï¼‰ =====
    function runDebugChecks(){
      const params = new URLSearchParams(location.search);
      if(params.get('debug') !== '1') return;

      const errors = [];

      // åŸºæœ¬ï¼štab / panel æ•¸é‡
      const tabs = qsa('.tab');
      const panels = qsa('.panel');
      if(tabs.length !== 6) errors.push('Tab æ•¸é‡ä¸ç­‰æ–¼ 6');
      if(panels.length !== 6) errors.push('Panel æ•¸é‡ä¸ç­‰æ–¼ 6');

      // Day1 / Day2 å¿…é ˆèƒ½è¢« template é‚„åŸå‡ºå…§å®¹
      const d1 = document.getElementById('day1');
      const d2 = document.getElementById('day2');
      if(!d1 || !d1.querySelector('.dayHeader') || !d1.querySelector('.timeline')) errors.push('Day1 çµæ§‹ç¼ºå¤±ï¼ˆ.dayHeader/.timelineï¼‰');
      if(!d2 || !d2.querySelector('.dayHeader') || !d2.querySelector('.timeline')) errors.push('Day2 çµæ§‹ç¼ºå¤±ï¼ˆ.dayHeader/.timelineï¼‰');

      // Day2ï¼šé †åºæª¢æŸ¥ï¼ˆç…§ç‰‡ â†’ é›¨å¤©å‚™æ¡ˆ â†’ å°èˆªï¼‰
      if(d2){
        const photo = d2.querySelector('.galleryWrap[aria-label="Day2 ç…§ç‰‡"]');
        const rain = Array.from(d2.querySelectorAll('details')).find(x => (x.textContent || '').includes('é›¨å¤©å‚™æ¡ˆï¼ˆDay2ï¼‰'));
        const nav = d2.querySelector('.links');

        if(!photo) errors.push('Day2 ç¼ºå°‘ã€Œç…§ç‰‡ã€å€å¡Š');
        if(!rain) errors.push('Day2 ç¼ºå°‘ã€Œé›¨å¤©å‚™æ¡ˆï¼ˆDay2ï¼‰ã€details');
        if(!nav) errors.push('Day2 ç¼ºå°‘ã€Œå°èˆªã€links');

        if(photo && rain && nav){
          const orderOk = (photo.compareDocumentPosition(rain) & Node.DOCUMENT_POSITION_FOLLOWING)
                       && (rain.compareDocumentPosition(nav) & Node.DOCUMENT_POSITION_FOLLOWING);
          if(!orderOk) errors.push('Day2 å€å¡Šé †åºéŒ¯èª¤ï¼ˆæ‡‰ç‚ºï¼šç…§ç‰‡ â†’ é›¨å¤©å‚™æ¡ˆ â†’ å°èˆªï¼‰');
        }
      }

      // Day3ï¼šé †åºæª¢æŸ¥ï¼ˆç…§ç‰‡ â†’ é›¨å¤©å‚™æ¡ˆ â†’ å°èˆªï¼‰
      const d3 = document.getElementById('day3');
      if(d3){
        const photo3 = d3.querySelector('.galleryWrap[aria-label="Day3 ç…§ç‰‡"]');
        const rain3 = Array.from(d3.querySelectorAll('details')).find(x => (x.textContent || '').includes('é›¨å¤©å‚™æ¡ˆï¼ˆDay3ï¼‰'));
        const nav3 = d3.querySelector('.links');
        if(photo3 && rain3 && nav3){
          const orderOk3 = (photo3.compareDocumentPosition(rain3) & Node.DOCUMENT_POSITION_FOLLOWING)
                        && (rain3.compareDocumentPosition(nav3) & Node.DOCUMENT_POSITION_FOLLOWING);
          if(!orderOk3) errors.push('Day3 å€å¡Šé †åºéŒ¯èª¤ï¼ˆæ‡‰ç‚ºï¼šç…§ç‰‡ â†’ é›¨å¤©å‚™æ¡ˆ â†’ å°èˆªï¼‰');
        }
      }

      if(errors.length){
        console.warn('[Itinerary Debug] ç™¼ç¾å•é¡Œï¼š', errors);
        alert('Debug æª¢æŸ¥æœªé€šéï¼š\n- ' + errors.join('\n- '));
      } else {
        console.log('[Itinerary Debug] OK');
        alert('Debug æª¢æŸ¥ï¼šOKï¼ˆåˆ‡é /é–å®š/é †åºçš†æ­£å¸¸ï¼‰');
      }
    }

    window.addEventListener('DOMContentLoaded', () => {
      restoreLockedPages();
      initTabs();
      initLightbox();
      runDebugChecks();
    });
  })();
  </script>
</body>
</html>
